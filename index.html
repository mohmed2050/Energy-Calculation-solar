<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام حساب متطلبات الطاقة الشمسية</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        h1, h2, h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        table, th, td {
            border: 1px solid #ddd;
        }
        
        th, td {
            padding: 12px;
            text-align: center;
        }
        
        th {
            background-color: var(--primary-color);
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .device-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .device-item {
            background: var(--light-color);
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .device-item:hover {
            background: var(--secondary-color);
            color: white;
        }
        
        .results {
            display: none;
            background-color: #e8f4fc;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        .summary-item {
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-right: 4px solid var(--secondary-color);
        }
        
        @media (max-width: 768px) {
            .device-list {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>نظام حساب متطلبات الطاقة الشمسية</h1>
        </header>
        
        <div class="card">
            <h2>الأجهزة المنزلية الشائعة</h2>
            <div class="device-list" id="commonDevices">
                <!-- سيتم ملؤها بواسطة JavaScript -->
            </div>
            
            <h2>أضف جهازك الخاص</h2>
            <div class="form-group">
                <label for="deviceName">اسم الجهاز:</label>
                <input type="text" id="deviceName" placeholder="أدخل اسم الجهاز">
            </div>
            <div class="form-group">
                <label for="devicePower">استهلاك الجهاز (واط):</label>
                <input type="number" id="devicePower" placeholder="أدخل استهلاك الجهاز بالواط">
            </div>
            <div class="form-group">
                <label for="deviceHours">عدد ساعات التشغيل اليومية:</label>
                <input type="number" id="deviceHours" placeholder="عدد الساعات يومياً">
            </div>
            <div class="form-group">
                <label for="deviceQuantity">الكمية:</label>
                <input type="number" id="deviceQuantity" value="1" min="1">
            </div>
            <button id="addDevice">إضافة الجهاز</button>
        </div>
        
        <div class="card">
            <h2>الأجهزة المضافة</h2>
            <table id="devicesTable">
                <thead>
                    <tr>
                        <th>اسم الجهاز</th>
                        <th>الاستهلاك (واط)</th>
                        <th>ساعات التشغيل</th>
                        <th>الكمية</th>
                        <th>الاستهلاك اليومي (واط/ساعة)</th>
                        <th>إجراءات</th>
                    </tr>
                </thead>
                <tbody id="devicesList">
                    <!-- سيتم ملؤها بواسطة JavaScript -->
                </tbody>
            </table>
            
            <div class="form-group">
                <label for="sunHours">متوسط ساعات الشمس اليومية في منطقتك:</label>
                <input type="number" id="sunHours" value="5" min="1" max="24">
            </div>
            
            <div class="form-group">
                <label for="batteryVoltage">جهد النظام (فولت):</label>
                <select id="batteryVoltage">
                    <option value="12">12 فولت</option>
                    <option value="24">24 فولت</option>
                    <option value="48">48 فولت</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="autonomyDays">عدد أيام الاحتياطي (في حالة عدم وجود شمس):</label>
                <input type="number" id="autonomyDays" value="1" min="1" max="7">
            </div>
            
            <button id="calculateBtn">حساب المتطلبات</button>
        </div>
        
        <div class="card results" id="resultsSection">
            <h2>نتائج الحساب</h2>
            
            <div class="summary-item">
                <h3>إجمالي الاستهلاك اليومي: <span id="totalConsumption">0</span> واط/ساعة</h3>
            </div>
            
            <div class="summary-item">
                <h3>متطلبات البطاريات:</h3>
                <p>سعة البطارية المطلوبة: <span id="batteryCapacity">0</span> أمبير/ساعة</p>
                <p>السعة مع احتياطي الأيام: <span id="batteryCapacityWithBackup">0</span> أمبير/ساعة</p>
            </div>
            
            <div class="summary-item">
                <h3>متطلبات الألواح الشمسية:</h3>
                <p>قدرة الألواح المطلوبة: <span id="solarPanelPower">0</span> واط</p>
                <p>العدد المقترح من الألواح (300 واط): <span id="solarPanelCount">0</span> لوح</p>
            </div>
            
            <div class="summary-item">
                <h3>متطلبات المنظم والانفرتر:</h3>
                <p>سعة المنظم المطلوبة: <span id="chargeControllerCapacity">0</span> أمبير</p>
                <p>قدرة الانفرتر المطلوبة: <span id="inverterCapacity">0</span> واط</p>
            </div>
        </div>
    </div>

    <script>
        // بيانات الأجهزة الشائعة
        const commonDevices = [
            { name: "مروحة", power: 50, hours: 6 },
            { name: "تلفاز LED", power: 80, hours: 5 },
            { name: "ثلاجة صغيرة", power: 100, hours: 8 },
            { name: "إنارة LED", power: 10, hours: 8 },
            { name: "حاسوب محمول", power: 60, hours: 4 },
            { name: "راوتر", power: 10, hours: 24 },
            { name: "شاحن هاتف", power: 5, hours: 3 },
            { name: "ميكروويف", power: 1000, hours: 0.5 },
            { name: "غسالة ملابس", power: 500, hours: 1 },
            { name: "مكيف صغير", power: 1000, hours: 4 }
        ];

        // مصفوفة لتخزين الأجهزة المضافة
        let devices = [];

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            // عرض الأجهزة الشائعة
            renderCommonDevices();
            
            // إضافة مستمعي الأحداث
            document.getElementById('addDevice').addEventListener('click', addCustomDevice);
            document.getElementById('calculateBtn').addEventListener('click', calculateRequirements);
        });

        // عرض الأجهزة الشائعة
        function renderCommonDevices() {
            const container = document.getElementById('commonDevices');
            container.innerHTML = '';
            
            commonDevices.forEach(device => {
                const div = document.createElement('div');
                div.className = 'device-item';
                div.innerHTML = `
                    <h4>${device.name}</h4>
                    <p>${device.power} واط</p>
                `;
                div.addEventListener('click', () => addDevice(device));
                container.appendChild(div);
            });
        }

        // إضافة جهاز من القائمة
        function addDevice(device) {
            devices.push({
                name: device.name,
                power: device.power,
                hours: device.hours,
                quantity: 1
            });
            renderDevicesTable();
        }

        // إضافة جهاز مخصص
        function addCustomDevice() {
            const name = document.getElementById('deviceName').value;
            const power = parseInt(document.getElementById('devicePower').value);
            const hours = parseInt(document.getElementById('deviceHours').value);
            const quantity = parseInt(document.getElementById('deviceQuantity').value);
            
            if (!name || !power || !hours) {
                alert('يرجى ملء جميع الحقول');
                return;
            }
            
            devices.push({
                name: name,
                power: power,
                hours: hours,
                quantity: quantity
            });
            
            // مسح الحقول
            document.getElementById('deviceName').value = '';
            document.getElementById('devicePower').value = '';
            document.getElementById('deviceHours').value = '';
            document.getElementById('deviceQuantity').value = 1;
            
            renderDevicesTable();
        }

        // عرض الأجهزة في الجدول
        function renderDevicesTable() {
            const tbody = document.getElementById('devicesList');
            tbody.innerHTML = '';
            
            devices.forEach((device, index) => {
                const dailyConsumption = device.power * device.hours * device.quantity;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${device.name}</td>
                    <td>${device.power}</td>
                    <td>${device.hours}</td>
                    <td>${device.quantity}</td>
                    <td>${dailyConsumption}</td>
                    <td><button onclick="removeDevice(${index})">حذف</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        // إزالة جهاز
        function removeDevice(index) {
            devices.splice(index, 1);
            renderDevicesTable();
        }

        // حساب متطلبات النظام
        function calculateRequirements() {
            if (devices.length === 0) {
                alert('يرجى إضافة جهاز واحد على الأقل');
                return;
            }
            
            // حساب إجمالي الاستهلاك اليومي
            const totalConsumption = devices.reduce((total, device) => {
                return total + (device.power * device.hours * device.quantity);
            }, 0);
            
            // الحصول على مدخلات المستخدم
            const sunHours = parseInt(document.getElementById('sunHours').value);
            const batteryVoltage = parseInt(document.getElementById('batteryVoltage').value);
            const autonomyDays = parseInt(document.getElementById('autonomyDays').value);
            
            // حساب سعة البطارية (أمبير/ساعة)
            const batteryCapacity = Math.ceil(totalConsumption / batteryVoltage);
            const batteryCapacityWithBackup = Math.ceil(batteryCapacity * autonomyDays * 1.2); // زيادة 20% للكفاءة
            
            // حساب قدرة الألواح الشمسية
            const solarPanelPower = Math.ceil(totalConsumption / sunHours * 1.3); // زيادة 30% للكفاءة والخسائر
            const solarPanelCount = Math.ceil(solarPanelPower / 300); // افتراض أن اللوح 300 واط
            
            // حساب سعة المنظم
            const chargeControllerCapacity = Math.ceil(solarPanelPower / batteryVoltage * 1.2); // زيادة 20% للسلامة
            
            // حساب قدرة الانفرتر (أعلى استهلاك للجهاز)
            const maxDevicePower = Math.max(...devices.map(device => device.power * device.quantity));
            const inverterCapacity = Math.ceil(maxDevicePower * 1.5); // زيادة 50% للسلامة
            
            // عرض النتائج
            document.getElementById('totalConsumption').textContent = totalConsumption;
            document.getElementById('batteryCapacity').textContent = batteryCapacity;
            document.getElementById('batteryCapacityWithBackup').textContent = batteryCapacityWithBackup;
            document.getElementById('solarPanelPower').textContent = solarPanelPower;
            document.getElementById('solarPanelCount').textContent = solarPanelCount;
            document.getElementById('chargeControllerCapacity').textContent = chargeControllerCapacity;
            document.getElementById('inverterCapacity').textContent = inverterCapacity;
            
            // إظهار قسم النتائج
            document.getElementById('resultsSection').style.display = 'block';
            
            // التمرير إلى القسم النتائج
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>